<div class="flex h-screen flex-col">
  <app-sidenav (navToggled)="onNavToggled($event)" class="fixed top-0 left-0 h-full z-10"></app-sidenav>
  <app-navbar class="relative z-20"></app-navbar>
  <div class="content-area">
    <div class="dashboard-container">
      <div class="transition-all duration-300 z-1 mt-16" [class.lg:ml-64]="isNavOpen" [class.lg:ml-20]="!isNavOpen">
      <!-- Main Content -->
      <div class="p-2 sm:p-4">
        <!-- Header -->
        <div class="mb-4 p-2">
          <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-2 sm:gap-0">
            <h1 class="text-xl sm:text-2xl font-bold">Class</h1>
            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 w-full sm:w-auto">
              <button (click)="openAddClassModal()" class="text-white px-4 py-2 rounded-lg flex items-center gap-2 w-full sm:w-auto" style="background-color: #0A7664;" onmouseover="this.style.backgroundColor='#22473F'" onmouseout="this.style.backgroundColor='#0A7664'">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                </svg>
                Add Class
              </button>
              <div class="relative w-full sm:w-auto">
                <input type="text" placeholder="Search" class="pl-3 pr-10 py-2 border rounded-lg w-full sm:w-auto">
                <button class="absolute right-3 top-1/2 transform -translate-y-1/2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <!-- Class Cards Grid -->
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            <div *ngFor="let class of classes" class="bg-gray-300 p-4 rounded-lg hover:bg-gray-400 transition-all duration-150 w-full min-h-[120px] flex flex-col justify-between">
              <h3 class="text-base sm:text-lg font-semibold">{{class.class_name}}</h3>
              <p class="text-xs sm:text-sm text-gray-600 mb-2">{{class.description}}</p>
              <!-- Weekly Routines Display - Card Based -->
              <div class="mb-2 space-y-2">
                <div *ngFor="let day of ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']" 
                     class="bg-white rounded p-2 text-xs sm:text-sm">
                  <div class="font-semibold text-gray-800 mb-1">{{day}}:</div>
                  <div class="text-gray-700">{{class[day.toLowerCase()+'Routine'] || '-'}}</div>
                  <div class="text-gray-600 mt-1">
                    Intensity: 
                    <span *ngIf="class[day.toLowerCase()+'IntensityEasy']" class="font-medium text-green-700">Easy</span>
                    <span *ngIf="class[day.toLowerCase()+'IntensityMedium']" class="font-medium text-yellow-700">Medium</span>
                    <span *ngIf="class[day.toLowerCase()+'IntensityHard']" class="font-medium text-red-700">Hard</span>
                    <span *ngIf="!class[day.toLowerCase()+'IntensityEasy'] && !class[day.toLowerCase()+'IntensityMedium'] && !class[day.toLowerCase()+'IntensityHard']" class="text-gray-500">-</span>
                  </div>
                </div>
              </div>
              <div class="mb-2">
                <span class="font-semibold text-gray-700">Total Students:</span>
                <span class="text-gray-800 font-bold">{{class.enrolledStudents?.length || 0}}</span>
              </div>
              <div class="flex justify-start mt-2">
                <button (click)="openClassDetailsModal(class)" class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold bg-[#0A7664] hover:bg-[#22473F] text-sm flex items-center gap-1">
                  <svg xmlns='http://www.w3.org/2000/svg' class='h-4 w-4' viewBox='0 0 20 20' fill='currentColor'><path d='M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z'/></svg>
                  Edit
                </button>
              </div>
            </div>
          </div>
          <!-- END: Class Cards Grid -->
        </div>
      </div>
    </div>

    <!-- Add Class Modal -->
    <div *ngIf="showAddClassModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white shadow-lg p-4 sm:p-8 rounded-lg w-full max-w-3xl mx-2 overflow-y-auto max-h-[90vh]">
        <h2 class="text-xl sm:text-2xl text-black font-bold mb-4 sm:mb-6">Add New Class</h2>
        
        <!-- Class Name -->
        <div class="mb-4">
          <label class="block text-black font-semibold mb-2">Class Name</label>
          <input type="text" [(ngModel)]="newClass.title" class="w-full p-2 sm:p-3 rounded border border-gray-300">
        </div>

        <!-- Class Description -->
        <div class="mb-4">
          <label class="block text-black font-semibold mb-2">Class Description</label>
          <textarea [(ngModel)]="newClass.description" rows="3" class="w-full p-2 sm:p-3 rounded border border-gray-300"></textarea>
        </div>

        <!-- Weekly Routines -->
        <div class="mb-4">
          <label class="block text-black font-semibold mb-2">Weekly Routines & Intensity:</label>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-2">
            <div *ngFor="let day of ['Monday','Tuesday','Wednesday','Thursday']">
              <label class="block text-black mb-1 text-sm sm:text-base">{{day}}</label>
              <input list="jargons" type="text" [(ngModel)]="newClass.routines[day.toLowerCase()]" class="w-full p-2 rounded border border-gray-300 mb-2 text-sm">
              <div class="flex flex-col sm:flex-row gap-1 sm:gap-2 intensity-group">
                <label class="flex items-center gap-1 text-xs sm:text-sm">
                  <input type="checkbox" [(ngModel)]="newClass.routines[day.toLowerCase()+'IntensityEasy']" (change)="onIntensityChange($any(day.toLowerCase()),'Easy')"> <span>Easy</span>
                </label>
                <label class="flex items-center gap-1 text-xs sm:text-sm">
                  <input type="checkbox" [(ngModel)]="newClass.routines[day.toLowerCase()+'IntensityMedium']" (change)="onIntensityChange($any(day.toLowerCase()),'Medium')"> <span>Medium</span>
                </label>
                <label class="flex items-center gap-1 text-xs sm:text-sm">
                  <input type="checkbox" [(ngModel)]="newClass.routines[day.toLowerCase()+'IntensityHard']" (change)="onIntensityChange($any(day.toLowerCase()),'Hard')"> <span>Hard</span>
                </label>
              </div>
            </div>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-2">
            <div *ngFor="let day of ['Friday','Saturday','Sunday']">
              <label class="block text-black mb-1 text-sm sm:text-base">{{day}}</label>
              <input list="jargons" type="text" [(ngModel)]="newClass.routines[day.toLowerCase()]" class="w-full p-2 rounded border border-gray-300 mb-2 text-sm">
              <div class="flex flex-col sm:flex-row gap-1 sm:gap-2 intensity-group">
                <label class="flex items-center gap-1 text-xs sm:text-sm">
                  <input type="checkbox" [(ngModel)]="newClass.routines[day.toLowerCase()+'IntensityEasy']" (change)="onIntensityChange($any(day.toLowerCase()),'Easy')"> <span>Easy</span>
                </label>
                <label class="flex items-center gap-1 text-xs sm:text-sm">
                  <input type="checkbox" [(ngModel)]="newClass.routines[day.toLowerCase()+'IntensityMedium']" (change)="onIntensityChange($any(day.toLowerCase()),'Medium')"> <span>Medium</span>
                </label>
                <label class="flex items-center gap-1 text-xs sm:text-sm">
                  <input type="checkbox" [(ngModel)]="newClass.routines[day.toLowerCase()+'IntensityHard']" (change)="onIntensityChange($any(day.toLowerCase()),'Hard')"> <span>Hard</span>
                </label>
              </div>
            </div>
          </div>
          <datalist id="jargons">
            <option value="fartlek (sprint straight, walk curve)"></option>
            <option value="sprint"></option>
            <option value="distance 3k"></option>
            <option value="distance 5k"></option>
            <option value="distance 10k"></option>
            <option value="Throws"></option>
            <option value="Push"></option>
            <option value="Form Training"></option>
            <option value="Strength Training"></option>
            <option value="Endurance Training"></option>
          </datalist>
              </div>

        <!-- Buttons -->
        <div class="flex flex-col sm:flex-row justify-end gap-2 sm:gap-4">
          <button (click)="confirmAddClass()" class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold w-full sm:w-auto" style="background:#0A7664;" onmouseover="this.style.backgroundColor='#22473F'" onmouseout="this.style.backgroundColor='#0A7664'">Add Class</button>
          <button (click)="closeAddClassModal()" class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold w-full sm:w-auto" style="background:gray" [ngClass]="'hover:bg-gray-700'">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Add Task Modal -->
    <div *ngIf="showAddTaskModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gray-500 p-4 sm:p-6 rounded-lg w-full max-w-md mx-2 overflow-y-auto max-h-[90vh]">
        <h2 class="text-lg sm:text-xl text-white mb-4">Add Task</h2>
        
        <!-- Task Title -->
        <div class="mb-4">
          <label class="block text-white mb-2">Task Title</label>
          <input type="text" [(ngModel)]="newTask.title" class="w-full p-2 sm:p-3 rounded">
        </div>

        <!-- Task Due Date -->
        <div class="mb-4">
          <label class="block text-white mb-2">Task Due Date</label>
          <input type="date" [(ngModel)]="newTask.dueDate" class="w-full p-2 sm:p-3 rounded">
        </div>

        <!-- Task Due Time -->
        <div class="mb-4">
          <label class="block text-white mb-2">Task Due Time</label>
          <input type="time" [(ngModel)]="newTask.dueTime" class="w-full p-2 sm:p-3 rounded">
        </div>

        <!-- Task Status -->
        <div class="mb-4">
          <label class="block text-white mb-2">Status</label>
          <select [(ngModel)]="newTask.status" class="w-full p-2 sm:p-3 rounded">
            <option value="Pending">Pending</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
          </select>
        </div>

        <!-- Buttons -->
        <div class="flex flex-col sm:flex-row justify-end gap-2 sm:gap-4">
          <button (click)="confirmAddTask()" class="bg-white text-gray-800 px-4 py-2 rounded w-full sm:w-auto">Confirm</button>
          <button (click)="closeAddTaskModal()" class="bg-white text-gray-800 px-4 py-2 rounded w-full sm:w-auto">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Upload Modal -->
    <div *ngIf="showUploadModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gray-500 p-4 sm:p-6 rounded-lg w-full max-w-md mx-2 overflow-y-auto max-h-[90vh]">
        <h2 class="text-lg sm:text-xl text-white mb-4">Upload Media</h2>
        
        <div class="mb-4">
          <label class="block text-white mb-2">Select File Type</label>
          <select [(ngModel)]="uploadType" class="w-full p-2 sm:p-3 rounded mb-4">
            <option value="image">Image</option>
            <option value="video">Video</option>
          </select>

          <input type="file" 
                 [accept]="uploadType === 'image' ? 'image/*' : 'video/*'"
                 (change)="onFileSelected($event)"
                 class="w-full p-2 sm:p-3 rounded bg-white">
        </div>

        <div class="flex flex-col sm:flex-row justify-end gap-2 sm:gap-4">
          <button (click)="confirmUpload()" class="bg-white text-gray-800 px-4 py-2 rounded w-full sm:w-auto">Upload</button>
          <button (click)="closeUploadModal()" class="bg-white text-gray-800 px-4 py-2 rounded w-full sm:w-auto">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Class Details Modal -->
    <div *ngIf="showClassDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white shadow-lg p-4 sm:p-8 rounded-lg w-full max-w-4xl mx-2 overflow-y-auto max-h-[90vh]">
        <div class="flex flex-col lg:flex-row items-start mb-6 gap-4">
          <div class="flex-1">
            <h2 class="text-xl sm:text-2xl text-black font-bold mb-2">{{selectedClass.class_name}}</h2>
            <div class="text-gray-700 mb-2 text-sm sm:text-base">{{selectedClass.description}}</div>
            <div class="text-sm text-gray-700 mb-2 font-medium">
              Total Students: <span class="font-bold">{{selectedClass.enrolledStudents?.length || 0}}</span>
            </div>
          </div>
          <div class="lg:ml-8 flex flex-col items-start">
            <span class="font-semibold text-black mb-2 text-base sm:text-lg">Intensity Chart</span>
            <div class="flex flex-col gap-1 text-sm sm:text-base">
              <span class="text-600 font-semibold">Easy: Conditioning</span>
              <span class="text-600 font-semibold">Medium: 50% to 70% power</span>
              <span class="text-600 font-semibold">Hard: Full heavy Workout</span>
            </div>
          </div>
        </div>

        <!-- Show routines with intensity checkmarks even in view mode -->
        <div class="mb-4">
          <label class="block text-black font-semibold mb-2">Class Routines & Intensity:</label>

          <!-- Table/grid for days -->
          <div class="overflow-x-auto">
            <table class="min-w-full bg-white text-xs sm:text-sm rounded">
              <thead>
                <tr>
                  <th class="px-2 py-1 text-left">Day</th>
                  <th class="px-2 py-1 text-left">Routine</th>
                  <th class="px-2 py-1 text-left">Easy</th>
                  <th class="px-2 py-1 text-left">Medium</th>
                  <th class="px-2 py-1 text-left">Hard</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let day of ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']">
                  <td class="px-2 py-1">{{day}}</td>
                  <td class="px-2 py-1"><input list="jargons" type="text" [(ngModel)]="selectedClass[day.toLowerCase()+'Routine']" class="w-full p-1 rounded border border-gray-300 text-xs" [readonly]="!isEditingClassDetails"></td>
                  <td class="px-2 py-1 text-center">
                    <span *ngIf="!isEditingClassDetails">
                      <span *ngIf="selectedClass[day.toLowerCase()+'IntensityEasy']" class="inline-block px-1 py-0.5 rounded bg-green-200 text-green-800">✔</span>
                    </span>
                    <input *ngIf="isEditingClassDetails" type="checkbox" [(ngModel)]="selectedClass[day.toLowerCase()+'IntensityEasy']">
                  </td>
                  <td class="px-2 py-1 text-center">
                    <span *ngIf="!isEditingClassDetails">
                      <span *ngIf="selectedClass[day.toLowerCase()+'IntensityMedium']" class="inline-block px-1 py-0.5 rounded bg-yellow-200 text-yellow-800">✔</span>
                    </span>
                    <input *ngIf="isEditingClassDetails" type="checkbox" [(ngModel)]="selectedClass[day.toLowerCase()+'IntensityMedium']">
                  </td>
                  <td class="px-2 py-1 text-center">
                    <span *ngIf="!isEditingClassDetails">
                      <span *ngIf="selectedClass[day.toLowerCase()+'IntensityHard']" class="inline-block px-1 py-0.5 rounded bg-red-200 text-red-800">✔</span>
                    </span>
                    <input *ngIf="isEditingClassDetails" type="checkbox" [(ngModel)]="selectedClass[day.toLowerCase()+'IntensityHard']">
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <datalist id="jargons">
            <option value="fartlek (sprint straight, walk curve)"></option>
            <option value="sprint"></option>
            <option value="distance 3k"></option>
            <option value="distance 5k"></option>
          </datalist>
        </div>

        <div class="mb-4">
          <h3 class="text-black font-semibold mb-2">Class Lists</h3>
          <div *ngIf="selectedClass.enrolledStudents && selectedClass.enrolledStudents.length > 0" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            <div *ngFor="let student of selectedClass.enrolledStudents" class="bg-gray-100 rounded p-3 border border-gray-300 flex flex-col justify-between">
              <div class="text-sm mb-2">
                <div class="font-medium text-gray-800">{{student.name}}</div>
                <div class="text-gray-600 text-xs">Code: {{student.code}}</div>
              </div>
              <button 
                (click)="openKickModal(student)" 
                class="mt-2 px-3 py-1 text-xs rounded transition-colors duration-150 text-white font-semibold w-full" 
                style="background-color: #dc2626;" 
                onmouseover="this.style.backgroundColor='#b91c1c'" 
                onmouseout="this.style.backgroundColor='#dc2626'">
                Kick
              </button>
            </div>
          </div>
          <div *ngIf="!selectedClass.enrolledStudents || selectedClass.enrolledStudents.length === 0" class="text-center py-4 text-gray-500">
            <p>No students enrolled in this class yet.</p>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row justify-between items-stretch sm:items-center mt-6 gap-4">
          <button class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold w-full sm:w-auto" style="background:#0A7664;" onmouseover="this.style.backgroundColor='#22473F'" onmouseout="this.style.backgroundColor='#0A7664'" (click)="openTokenModal()">Generate Token</button>
          <div class="flex flex-col sm:flex-row gap-2 w-full sm:w-auto">
            <button *ngIf="!isEditingClassDetails" (click)="isEditingClassDetails = true" class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold w-full sm:w-auto" style="background:#0A7664;" onmouseover="this.style.backgroundColor='#22473F'" onmouseout="this.style.backgroundColor='#0A7664'">Edit</button>
            <button *ngIf="isEditingClassDetails" (click)="confirmEditClassDetails()" class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold w-full sm:w-auto" style="background:#0A7664;" onmouseover="this.style.backgroundColor='#22473F'" onmouseout="this.style.backgroundColor='#0A7664'">Confirm</button>
            <button *ngIf="!isEditingClassDetails" (click)="deleteClass()" class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold w-full sm:w-auto" style="background:#dc2626;" onmouseover="this.style.backgroundColor='#b91c1c'" onmouseout="this.style.backgroundColor='#dc2626'">Delete Class</button>
            <button (click)="closeClassDetailsModal()" class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold w-full sm:w-auto" style="background:gray" [ngClass]="'hover:bg-gray-700'">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Kick Student Modal -->
    <div *ngIf="showKickModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white shadow-lg p-4 sm:p-8 rounded-lg w-full max-w-md mx-2 overflow-y-auto max-h-[90vh]">
        <h2 class="text-xl sm:text-2xl text-black font-bold mb-4 sm:mb-6">Kick Student</h2>
        
        <div class="mb-4">
          <p class="text-gray-700 mb-2">
            <strong>Student:</strong> {{selectedStudentForKick?.name}}
          </p>
          <p class="text-gray-600 text-sm mb-4">
            <strong>Code:</strong> {{selectedStudentForKick?.code}}
          </p>
        </div>

        <!-- Reason Input -->
        <div class="mb-6">
          <label class="block text-black font-semibold mb-2">Reason for kicking:</label>
          <textarea 
            [(ngModel)]="kickReason" 
            rows="4"
            class="w-full p-3 rounded border border-gray-300 text-base"
            placeholder="Enter the reason for kicking this student..."
            maxlength="255"></textarea>
          <p class="text-xs text-gray-500 mt-1">{{(kickReason || '').length}}/255 characters</p>
        </div>

        <!-- Buttons -->
        <div class="flex flex-col sm:flex-row justify-end gap-2 sm:gap-4">
          <button 
            (click)="confirmKickStudent()" 
            [disabled]="!kickReason || kickReason.trim().length === 0 || isKickingStudent"
            class="px-4 py-2 rounded transition-colors duration-150 text-white font-semibold w-full sm:w-auto"
            [style.background-color]="!isKickingStudent && kickReason && kickReason.trim().length > 0 ? '#dc2626' : '#9CA3AF'"
            (mouseover)="!isKickingStudent && kickReason && kickReason.trim().length > 0 && (($any($event.target)).style.backgroundColor = '#b91c1c')"
            (mouseout)="!isKickingStudent && kickReason && kickReason.trim().length > 0 && (($any($event.target)).style.backgroundColor = '#dc2626')"
            [ngClass]="{
              'cursor-not-allowed': isKickingStudent || !kickReason || kickReason.trim().length === 0
            }">
            <span *ngIf="!isKickingStudent">Confirm Kick</span>
            <span *ngIf="isKickingStudent">Processing...</span>
          </button>
          <button 
            (click)="closeKickModal()" 
            class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors duration-150 w-full sm:w-auto">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Token Generation Modal -->
    <div *ngIf="showTokenModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white shadow-lg p-4 sm:p-8 rounded-lg w-full max-w-lg mx-2 overflow-y-auto max-h-[90vh]">
        <h2 class="text-xl sm:text-2xl text-black font-bold mb-4 sm:mb-6">Generate Tokens</h2>
        
        <!-- Token Count Input -->
        <div class="mb-6">
          <label class="block text-black font-semibold mb-2">How many tokens would you like to generate?</label>
          <input 
            type="number" 
            [(ngModel)]="tokenCount" 
            min="1" 
            max="100" 
            class="w-full p-3 rounded border border-gray-300 text-base sm:text-lg"
            placeholder="Enter number (1-100)">
        </div>

        <!-- Generate Button -->
        <div class="mb-6">
          <button 
            (click)="generateTokens()" 
            [disabled]="isGeneratingTokens || tokenCount < 1 || tokenCount > 100"
            class="w-full px-6 py-3 rounded transition-colors duration-150 text-white font-semibold"
            [style.background-color]="!isGeneratingTokens && tokenCount >= 1 && tokenCount <= 100 ? '#0A7664' : '#9CA3AF'"
            (mouseover)="!isGeneratingTokens && tokenCount >= 1 && tokenCount <= 100 && (($any($event.target)).style.backgroundColor = '#22473F')"
            (mouseout)="!isGeneratingTokens && tokenCount >= 1 && tokenCount <= 100 && (($any($event.target)).style.backgroundColor = '#0A7664')"
            [ngClass]="{
              'cursor-not-allowed': isGeneratingTokens || tokenCount < 1 || tokenCount > 100
            }">
            <span *ngIf="!isGeneratingTokens">Generate Tokens</span>
            <span *ngIf="isGeneratingTokens">Generating...</span>
          </button>
        </div>

        <!-- Generated Tokens Display -->
        <div *ngIf="generatedTokens.length > 0" class="mb-6">
          <div class="flex flex-col sm:flex-row items-stretch sm:items-center justify-between mb-4 gap-2">
            <h3 class="text-base sm:text-lg text-black font-semibold">Generated Tokens:</h3>
            <button 
              (click)="copyAllTokensToClipboard()"
              class="px-4 py-2 text-white rounded transition-colors duration-150 w-full sm:w-auto" style="background-color: #0A7664;" onmouseover="this.style.backgroundColor='#22473F'" onmouseout="this.style.backgroundColor='#0A7664'">
              Copy All
            </button>
          </div>
          <div class="space-y-2">
            <div *ngFor="let token of generatedTokens" class="flex items-center justify-between p-3 bg-gray-100 rounded border border-gray-300">
              <span class="font-mono text-base sm:text-lg text-black break-all">{{token}}</span>
              <button 
                (click)="copyTokenToClipboard(token)"
                class="ml-2 px-2 py-1 text-white rounded transition-colors duration-150 text-xs sm:text-sm" style="background-color: #0A7664;" onmouseover="this.style.backgroundColor='#22473F'" onmouseout="this.style.backgroundColor='#0A7664'">
                Copy
              </button>
            </div>
          </div>
        </div>

        <!-- Close Button -->
        <div class="flex justify-end">
          <button 
            (click)="closeTokenModal()" 
            class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors duration-150 w-full sm:w-auto">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>